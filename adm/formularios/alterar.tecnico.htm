<!DOCTYPE html> 
<html lang="pt-br">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Cat&aacute;logo de Jogos</title>
        <link rel="stylesheet" type="text/css" href="../../css/layoutadm.css" />
        <script language="javascript" type="text/javascript" src="../../javascript/scripts.min.js"></script>

        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() {
                location.queryString = {};
                location.search.substr(1).split("&").forEach(function (pair) {
                    if (pair === "") return;
                    var parts = pair.split("=");
                    location.queryString[parts[0]] = parts[1] &&
                        decodeURIComponent(parts[1].replace(/\+/g, " "));
                });

                var xhr = Ajax.createXHR();

                xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/tecnico.php?a=2&id="+location.queryString.codigo,true);
                    
                xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                xhr.onreadystatechange = function() {
                    //Verificar pelo estado "4" de pronto.

                    if (xhr.readyState == '4' && xhr.status == '200') {
                        //Pegar dados da resposta json
                        var data = JSON.parse(xhr.responseText);
                        document.getElementById("codigo").value = data.codigo_tecnico;
                        document.getElementById("txtNome").value = data.nome;
                    }
                }

                xhr.send();
            });
        </script>
    </head>
	
    <body>
        <div id="geral">
            <div id="cabecalho">
            </div>

            <header>
                <nav id="menu_superior">
                    <a href="../paginas/home.php">Home</a> ::
                    <a href="../paginas/cadastros.php">Cadastros</a> ::
                    <a href="../paginas/administrar.php">Administrar</a> ::
                    <a href="../paginas/consultas.php">Consultas</a> ::
                    <a href="logout.php">Sair</a>
                </nav>
            </header>

            <div id="conteudo">
                <h2 class="titulo">Alterar Dados de tecnico</h2>

                <form class="form" id="frmTecnico" name="frmTecnico" >
                    <table>
                        <tr>
                            <td>Nome:</td>
                            <td>
                                <input type="text" name="txtNome" id="txtNome" value="" />
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2">
                                <input type="hidden" name="codigo" id="codigo" value="" />
                                <input id="btnAtualizar" name="btnAtualizar" type="button" value="Alterar"  onclick="Tecnico.atualizar(frmTecnico)"/>
                            </td>
                        </tr>
                    </table>
                </form>

                <div id="mensagem"></div>
            </div>

            <footer id="rodape">
            </footer>       	
        </div>
    </body>

</html>
